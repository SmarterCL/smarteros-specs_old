# skills/voz/evaluar_riesgo_vocal.yaml
# OpenSpec Skill for Vocal Risk Assessment
# Based on VTD Scale and empirical characterization
skill: evaluar_riesgo_vocal
description: "Vocal risk assessment skill based on VTD Scale and exposure characterization"
tenant_isolated: true
version: "1.0"
status: "stable"
category: "health_prevention"
input:
  type: object
  required:
    - datos_usuario
    - exposicion_vocal
  properties:
    datos_usuario:
      type: object
      description: "User demographic and professional data"
      properties:
        rut:
          type: string
          description: "Chilean RUT for identification"
        edad:
          type: number
          description: "User age in years"
        genero:
          type: string
          enum: ["masculino", "femenino", "otro"]
          description: "User gender"
        profesion:
          type: string
          description: "User profession"
        anos_ejercicio:
          type: number
          description: "Years in profession"
    exposicion_vocal:
      type: object
      description: "Vocal exposure data"
      properties:
        horas_uso_diario:
          type: number
          description: "Daily vocal usage hours"
        intensidad:
          type: string
          enum: ["baja", "media", "alta"]
          description: "Vocal intensity level"
        entorno:
          type: string
          enum: ["silencioso", "moderado", "ruidoso"]
          description: "Environment noise level"
        uso_equipos:
          type: boolean
          description: "Use of amplification equipment"
        sintomas:
          type: array
          items:
            type: string
          description: "Reported vocal symptoms"
output:
  type: object
  properties:
    score_riesgo:
      type: number
      minimum: 0
      maximum: 100
      description: "Vocal risk score (0-100)"
    categoria:
      type: string
      enum: ["bajo", "moderado", "alto", "critico"]
      description: "Risk category"
    senales_predictivas:
      type: array
      items:
        type: object
        properties:
          tipo:
            type: string
            description: "Signal type"
          valor:
            type: number
            description: "Signal value"
          umbral:
            type: number
            description: "Threshold value"
          recomendacion:
            type: string
            description: "Preventive recommendation"
    recomendaciones:
      type: array
      items:
        type: string
      description: "Preventive recommendations"
    timestamp:
      type: string
      format: date-time
      description: "Assessment timestamp"
    tenant_id:
      type: string
      description: "Tenant identifier"
execution:
  endpoint: "/mcp/execute"
  method: "POST"
  permissions: ["authenticated"]
  timeout: 30
  example:
    request:
      skill: "evaluar_riesgo_vocal"
      input:
        datos_usuario:
          rut: "12.345.678-9"
          edad: 45
          genero: "masculino"
          profesion: "profesor"
          anos_ejercicio: 20
        exposicion_vocal:
          horas_uso_diario: 6
          intensidad: "alta"
          entorno: "ruidoso"
          uso_equipos: false
          sintomas: ["fatiga", "ronquera"]
    response:
      score_riesgo: 78
      categoria: "alto"
      senales_predictivas:
        - tipo: "fatiga_vocal"
          valor: 8.2
          umbral: 7.5
          recomendacion: "Reducir uso vocal continuo"
      recomendaciones:
        - "Realizar pausas cada 45 minutos"
        - "Usar equipo de amplificación"
        - "Consultar fonoaudiólogo"
      timestamp: "2025-12-25T12:00:00Z"
      tenant_id: "tenant_456"
events:
  evaluacion_iniciada:
    description: "Triggered when vocal risk assessment starts"
    payload:
      - assessment_id
      - rut
      - tenant_id
  evaluacion_completada:
    description: "Triggered when vocal risk assessment completes"
    payload:
      - assessment_id
      - rut
      - score_riesgo
      - categoria
      - tenant_id
  riesgo_alto_detectado:
    description: "Triggered when high risk is detected"
    payload:
      - assessment_id
      - rut
      - score_riesgo
      - recomendaciones
      - tenant_id
validation:
  rules:
    - field: datos_usuario.rut
      type: chilean_rut
      required: true
    - field: datos_usuario.edad
      type: number
      min: 18
      max: 100
      required: true
    - field: exposicion_vocal.horas_uso_diario
      type: number
      min: 0
      max: 24
      required: true
    - field: output.score_riesgo
      type: number
      min: 0
      max: 100
      required: true
relationships:
  usuario:
    type: many-to-one
    entity: customer
    foreign_key: rut
  tenant:
    type: many-to-one
    entity: tenant
    foreign_key: tenant_id
security:
  requirements:
    - User consent required
    - Data anonymization for aggregates
    - Compliance with Ley 19.628
    - Retention: 5 years
  permissions:
    - authenticated: Can execute
    - admin: Can view all assessments
    - health_professional: Can view detailed results
---
# Vocal Risk Assessment Algorithm

## Scientific Basis

Based on:
- VTD Scale (Vocal Tract Discomfort Scale)
- Empirical characterization from study
- Correlations defined in Annex 1-3

## Calculation Method

```
score_riesgo = (
  (horas_uso_diario * peso_horas) +
  (intensidad_factor * peso_intensidad) +
  (entorno_factor * peso_entorno) +
  (sintomas_count * peso_sintomas) +
  (edad_factor * peso_edad)
) * normalization_factor
```

## Risk Categories

- **Bajo:** 0-30
- **Moderado:** 31-60
- **Alto:** 61-80
- **Crítico:** 81-100

## Predictive Signals

Based on empirical correlations:
- Fatiga vocal > 7.5 → Alto riesgo
- Ronquera > 3 días/semana → Alto riesgo
- Uso continuo > 4 horas → Moderado riesgo

## Compliance

This skill complies with:
- Ethical guidelines for health assessments
- Data protection laws (Ley 19.628)
- Professional practice standards

## Integration

Can be integrated with:
- ACHS prevention programs
- Mutual de Seguridad systems
- Institutional health platforms
- SmartCity health monitoring

## Version History

v1.0 - Initial specification based on study results
v1.1 - Added predictive signals
v1.2 - Added compliance requirements
